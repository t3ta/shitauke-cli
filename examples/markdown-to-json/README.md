# Markdown to JSON 変換

## 概要

このディレクトリでは、`shitauke-cli` を使用してマークダウン文書を構造化されたJSONデータに変換する例を提供しています。見出し階層、リスト項目、テーブル、フォーマット情報（太字やリンクなど）を適切に保持したJSONに変換できます。

## 使用方法

```bash
# 基本的な使い方
cd /path/to/shitauke-cli
node dist/index.js send "$(cat ./examples/markdown-to-json/optimal-prompt.txt)" \
  -m gemini-2.0-flash-001 \
  -f json \
  -i ./examples/markdown-to-json/sample.md \
  -o ./examples/markdown-to-json/output.json

# 上書きオプションを使用する場合
node dist/index.js send "$(cat ./examples/markdown-to-json/optimal-prompt.txt)" \
  -m gemini-2.0-flash-001 \
  -f json \
  -i ./examples/markdown-to-json/sample.md \
  -o ./examples/markdown-to-json/output.json \
  --overwrite
```

## プロンプト最適化のポイント

プロンプトでは以下の工夫を行っています：

1. **明確な変換ルール**: 階層構造、リスト処理、テーブル処理、書式情報の保持など、詳細な変換ルールを提示
2. **データ型の明示**: 日付や数値などは適切なデータ型に変換するよう指示
3. **出力形式の指定**: コードブロック記法を含めない純粋なJSONデータの出力を指示
4. **構造のバランス**: 厳密な構造よりも読みやすさと使いやすさを優先するよう指示
5. **UTF-8文字の保持**: 日本語などのUTF-8文字をエスケープせずそのまま保持するよう指定

## 機能の特徴

- **自動クリーニング機能**: `-f json`オプションを使用すると、AIモデルからの出力にマークダウンコードブロック（```json〜```）が含まれていても自動的に削除され、整形されたJSONファイルが生成されます
- **JSON検証**: 出力内容がJSON形式として正しいかをチェックし、正しいJSONの場合は整形して出力します
- **構造化変換**: マークダウンの見出し、リスト、テーブルなどの要素を適切なJSON構造に変換します

## 入力/出力の説明

### 入力ファイル (sample.md)
マークダウン形式で書かれたプロジェクト概要文書です。見出し、リスト、テーブル、書式付きテキスト、リンクなど様々なマークダウン要素を含んでいます。

### 出力ファイル (output.json)
階層構造や書式情報を保持した構造化されたJSON形式のデータです。各見出しはJSONのオブジェクト階層に、リストは配列に、テーブルはオブジェクトの配列に変換されています。

## ファイル構成

- **README.md**: この説明ファイル
- **optimal-prompt.txt**: 最適化されたプロンプトファイル
- **sample.md**: 変換元のマークダウンファイル
- **output.json**: 生成されたJSONファイル

## ユースケース

- **ドキュメント管理システム**: マークダウン形式のドキュメントをデータベースに構造化して保存
- **API仕様書の変換**: API仕様書をプログラムで処理可能なJSON形式に変換
- **コンテンツ管理**: CMS向けにマークダウンコンテンツを構造化データに変換
- **データ抽出**: マークダウン文書から特定の情報を抽出し分析や可視化に利用

## 拡張アイデア

- **カスタム変換ルール**: 特定のマークダウン構造に合わせた変換ルールのカスタマイズ
- **スキーマ検証**: 出力JSONを特定のスキーマに従うよう検証機能の追加
- **双方向変換**: JSON→マークダウンの逆変換機能の実装
- **バッチ処理**: 複数のマークダウンファイルを一括変換する機能